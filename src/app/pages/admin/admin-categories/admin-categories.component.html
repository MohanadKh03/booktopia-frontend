<div class="container mt-4" style="max-width: 700px">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Manage Categories</h2>
    <div>
      <input
        type="text"
        class="form-control d-inline-block me-2"
        placeholder="New category name"
        [(ngModel)]="newCategoryName"
        style="width: 300px"
      />
      <button class="btn btn-primary btn-sm" (click)="addCategory()">
        Add
      </button>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead class="text-black">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col" class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categories">
          <td>{{ category._id }}</td>
          <td>
            <div *ngIf="editingCategory?._id === category._id; else viewMode">
              <input
                type="text"
                class="form-control"
                [(ngModel)]="editingCategory.name"
                style="max-width: 300px; display: inline-block"
              />
              <button class="btn btn-success btn-sm ms-2" (click)="saveEdit()">
                Save
              </button>
              <button
                class="btn btn-secondary btn-sm ms-2"
                (click)="cancelEdit()"
              >
                Cancel
              </button>
            </div>
            <ng-template #viewMode>
              {{ category.name }}
            </ng-template>
          </td>
          <td class="text-center">
            <button
              *ngIf="editingCategory?._id !== category._id"
              class="btn btn-warning btn-sm me-2"
              (click)="startEditing(category)"
            >
              Edit
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="deleteCategory(category._id)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
